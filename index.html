<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="media\MR.png">

  <title>Interactive Map ..</title>

  <script src="https://api.stadiamaps.com/tz/lookup/v1?lat=59.43696&lng=24.75357&api_key=78c8ebd3-9956-4347-9d7d-cdc87413fc59"defer></script>
	
  <!-- jQuery-->
  <script src="Search.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

  <!-- Leaflet (CSS and JS) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
  crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
  integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
  crossorigin=""></script>

  <!-- PapaParse -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/js/fontawesome.min.js"></script>

  <!-- leaflet-providers-->
  <script src="https://unpkg.com/leaflet-providers@1.10.2/leaflet-providers.js"></script>
  
  <!-- Leaflet.awesome-markers v2.0.4, manually updated to svg to allow hex and material icons -->
  <link rel="stylesheet" type="text/css" href="scripts/Leaflet.awesome-markers/dist/leaflet.awesome-markers.css">
  <script type="text/javascript" src="scripts/Leaflet.awesome-markers/dist/leaflet.awesome-markers.js"></script>

  <!-- Leaflet Markercluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
  <script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

  <!-- Leaflet Markercluster layer support -->
  <script src="https://unpkg.com/leaflet.markercluster.layersupport@2.0.1/dist/leaflet.markercluster.layersupport.js"></script>

  <!-- Leaflet control geocoder -->
  <link rel="stylesheet" href="leaflet-search-master\dist\leaflet-search.src.css" />
  <script src="leaflet-search-master\dist\leaflet-search.src.js"></script>

  <!-- Locate Control -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.72.0/L.Control.Locate.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.72.0/L.Control.Locate.min.js"></script>

  <!-- jQuery-CSV -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js"></script>

  <!-- Custom style sheet -->
  <link rel="stylesheet" type="text/css" href="style.css">

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" />

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>

<body>
	<script language="javascript">
/*<!--hide
var password;
var pass1="";
password=prompt('Password Required..','');
if (password==pass1);
else {
  window.location="https://nour-rabea.github.io/Cred/";
}
-->
	</script>
	
  <div class="loader">Loading...</div>
	<div id="map"></div>
	<button id="container" class="btn">Prices Analysis</button>
	<button id="container1" class="btn" onclick="masterplan()">Master Plans</button>
	
	<table id="maptable" class="display"></table>
	
<script type="text/javascript">
	var map = L.map('map', {
		attributionControl: false,
		zoomControl: false,
		scrollWheelZoom: true,
		tap: false
	}).setView([30.02,31.55], 11); // default center is overridden by Google Sheet options and points
	    var Esri_WorldGrayCanvas = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
      maxZoom: 16
    }).addTo(map);
    var TopPlusOpen_Grey = L.tileLayer('http://sgx.geodatenzentrum.de/wmts_topplus_open/tile/1.0.0/web_grau/default/WEBMERCATOR/{z}/{y}/{x}.png', {
      maxZoom: 18
    });
//Leaflet layer control
    var baseMaps = {
      'Street Map': Esri_WorldGrayCanvas,
      'Details Map': TopPlusOpen_Grey,
    }
    var overlayMaps = {
      'Satellite': L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_satellite/{z}/{x}/{y}{r}.{ext}', {
	minZoom: 0,
	maxZoom: 20,
	ext: 'jpg'
}
)}
	//Json data search
const searchLayer = L.geoJSON(Search, {
  onEachFeature: function(feature, layer) {
    layer.bindPopup(feature.properties.Project);
  }
});

//control search
const searchControl = new L.Control.Search({
  layer: searchLayer,
  zoom: "13",
  propertyName: 'Project'
}).setPosition('topright');
map.addControl(searchControl);
map.removeLayer(searchLayer);
</script>
  
<script>function myFun() {map.flyTo([30.002088,30.969116], 15);}</script>

<script>
	var myImageLayer;
	function masterplan() {
		var imageUrl1 = 'media/layout.png';
		var imageBounds1 = [[29.994293, 31.574531], [29.933195, 31.521640], [29.921658, 31.583310]];
		var imageUrl2 = 'media/Ever New Cairo.png';
		var imageBounds2 = [[29.96082394542264, 31.551824360849114], [29.95878863958161, 31.572030310322205], [29.946888523035046, 31.571582159250166], [29.947827600512134, 31.551560355430034]];
		var imageUrl3 = 'media/Castle LandMark.png';
		var imageBounds3 = [[29.97287392352009, 31.711373480696945], [29.97053381500239, 31.715168550377484], [29.9679917154688, 31.712350924705873], [29.970716608032465, 31.709196271401364]];
		var imageUrl4 = 'media/Ever October.png';
		var imageBounds4 = [[30.00261057433003, 30.964877735753902], [29.99936753205223, 30.968890630645248], [30.002336587932106, 30.972919406616146],[30.005060786741346, 30.97019297183146]];
		
		if (myImageLayer) {
			map.removeLayer(myImageLayer);
			myImageLayer = null;
		} else {
			myImageLayer = L.layerGroup([
				L.imageOverlay(imageUrl1, imageBounds1),
				L.imageOverlay(imageUrl2, imageBounds2),
				L.imageOverlay(imageUrl3, imageBounds3),
				L.imageOverlay(imageUrl4, imageBounds4)
			]);
			myImageLayer.addTo(map);
		}
	}
</script>
	
  <script type="text/javascript" src="./google-doc-url.js"></script>
  <script type="text/javascript" src="./scripts/constants.js"></script>
  <script type="text/javascript" src="./scripts/palette.js"></script>
  <script type="text/javascript" src="./scripts/polylabel.js"></script>
  <script type="text/javascript" src="./scripts/map.js"></script>

</body>
</html>
